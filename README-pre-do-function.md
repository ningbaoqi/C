### 头文件
+ 把这些公共的部分放在头文件`calc.h`中，在需要使用该头文件时通过`#include`指令将它包含进来；
#### calc.h文件

```
#define NUMBER '0'
void push(double);
double pop(void);
int getop(char[]);
int getch(void);
void ungetch(int);
```

#### stack.c

```
#include<stdio.h>
#include<calc.h>
#define MAXVAL 100
int sp = 0;
double val[MAXVAL];
void push(double){
       .......
}

double pop(void){
       .......
}
```

### Ｃ预处理器
+ 预处理器执行宏替换、条件编译以及包含指定的文件，以`#`开头的命令行(`#`前可以有空格)就是预处理器处理的对象，这些命令行的语法独立于语言的其他部分，他们可以在任何地方，其作用可延续到所在编译单元的末尾(与作用域无关)；两个最常用的预处理指令是：`#include`指令（用于在编译期间把指定文件的内容包含进当前文件中）和`#define指令`（用任意字符序列替代一个标记）；
#### 文件包含

|文件包含|说明|
|-------|-------|
|`#include <文件名>`|将把该行替换为文件名指定的文件的内容|
|`#include "文件名"`|首先从源文件的位置开始搜索指定文件，如果没有找到指定的文件，则按照第一种定义的方式处理|
|`#include 记号序列`|同上述两种情况不同，它将按照扩展普通文本的方式扩展记号序列进行解释，记号序列必须被解释为`<......>`或`"......"`两种形式，然后按照上述方式进行相应的处理，`#include文件可以嵌套`|
+ 如果某个包含文件的内容发生了变化，那么所有依赖于该包含文件的源文件都必须重新编译；
#### 宏替换
+ 宏定义的形式如下：`#define 名字 替换文本`；也可以把一个较长的宏定义分成若干行，这时需要在待续的行末尾加上一个反斜杠符`\`；`#define`指令定义的名字的作用域从其定义点开始，到被编译的源文件的末尾结束；如果YES是一个通过#define指令定义过的名字，则在`printf("YES")`或YESMAN中将不执行替换； `<ctype.h>`头文件中定义的函数也常常是通过宏定义实现的；
```
#define forever for(;;)  //该语句为无限循环定义了一个新名字forever
#define max(A , B) ((A) > (B) ? (A) : (B))  //宏定义也可以带参数，这样可以对不同的宏调用使用不同的替换文本，如 x = max(p + q , r + s) 将被替换为x = ((p + q) > (r + s) ? (p + q ) : ( r + s ))
```
+ 可以通过`#undef`指令取消名字的宏定义，将`#undef`应用于未知标识符(即未用`#define`指令定义的标识符)并不会导致错误，这样做可以保证后续的调用是函数调用，而不是宏调用；如`#undef getchar`；预处理器运算符`##`为宏扩展提供了一种连接实际参数的手段，如果替换文本中的参数与`##`相邻，则该参数将被实际参数替换，`##`与前后的空白符将被删除，并对替换后的结果重新扫描；如：`#define paste(front , back) front ## back`；因此，宏调用`paste(name , 1)`的结果将建立记号`name1`；
#### 条件包含
+ 还可以使用条件语句对预处理本身进行控制，这种条件语句的值是在预处理执行的过程中进行计算的，这种方式为在编译过程中根据计算所得的条件值选择性的包含不同代码提供了一种手段；`#if`语句对其中的常量表达式进行求值，如果该表达式的值不等于0，则包含其后的各行，直到遇到`#endif、#elif或#else`语句为止（预处理器语句`#elif`类似于`else if`），在`#if`语句中可以使用表达式`defined(名字)`，该表达式的值遵循下列规则，当名字已经被定义时，其值为1，否则，其值为0；
```
#if SYSTEM == SYSV
       #define HDR "sysv.h"
#elif SYSTEM == BSD
       #define HDR "bsd.h"
#elif SYSTEM == MSDOS
       #define HDR "msdos.h"
#else
       #define HDR "default.h"
#endif
#inclide HDR
```
+ C语言专门定义了两个预处理语句`#ifdef与#ifndef`，他们用来测试某个名字是否已经定义；
```
#ifndef HDR
#define HDR
       //hdr.h文件的内容放在这里
#endif
```
+ `#error 记号序列`如果发生错误将中断编译，将使处理器打印包含该记号序列的诊断信息；`#pragma 记号序列`将使预处理器执行一个与具体实现相关的操作，无法识别的`pragma`将被忽略；
